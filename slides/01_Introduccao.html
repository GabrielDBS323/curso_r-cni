<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introducão ao R e RStudio</title>
    <meta charset="utf-8" />
    <meta name="author" content="Daniel Marcelino   Brasília" />
    <meta name="date" content="2021-09-22" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introducão ao R e RStudio
## Scrapping e manipulação de dados em R <br> Confederação Nacional da Indústria - CNI
### Daniel Marcelino <br> Brasília
### 2021-09-22

---







# Apresentação

+ Introdução 
    + Apresentação do R e RStudio
    + Introdução a linguagem R
    + Iniciando com dados
    + Medidas estatísticas básicas com R
    + Apresentação do `RMarkdown`
    + Como evitar problemas no R
    + Gerenciamento de versões e bibliotecas 
    + Versionamento de código no __Github__

---


# Apresentação

+ Manipulação de dados
    + Anatomia do ecossistema __tidyverse__
    + Dados em formato __tidy__ 
    + Manipulação de Data Frames com __dplyr__ 
    + Análise exploratória de dados 
    + Programação funcional 
    + Visualizações rápidas com __ggplot2__
    + Camunicação de resultados

---

# Apresentação

+ Scraping de dados da web

+ Obtendo dados por meio de APIs

+ Obtendo dados da API da Câmara

+ Obtendo dados da API do Senado

???

_Esta proposta foi preparada para a CNI com o objetivo de treinar uma equipe de analistas com técnicas modernas de aquisição, consumo e manipulação de dados públicos, mediante raspagem e requisições via APIs_


---
class: inverse, middle, center

# Sobre o instrutor 

---

.pull-left[
  __Daniel Marcelino__ é cientista de dados sênior no [__JOTA__](https://jota.info) em Brasília. É especializado em métodos quantitativos, aprendizado de máquinas e modelos de previsão. Além do JOTA, é professor da disciplina _Análise de Informações e Risco_ na pós-graduação do __Ibmec__. Antes do JOTA, trabalhou em universidades e órgãos de governos: Universidade de York (Toronto, Canadá), Universidade de Montreal (Canadá), IPEA (Instituto de Pesquisa Econômica Aplicada) e Prefeitura de Curitiba. Também é autor/dev de alguns pacotes publicados no __CRAN__ e __Github__, além de contribuíções em R e Python em outros pacotes.
]

.pull-right[
![Daniel Marcelino](https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_daniel.jpg)
]



---
class: inverse, middle, center

# Apresentação do R e RStudio

---

## Por que aprender __R__?

+ Atualmente é a linguagem de programação mais utilizada na academia e por estatísticos

--

+ Uma das 2 linguagens mais utilizadas por times de ciência de dados

--

+ **software __livre__**: livre significa __livre para ser usado e modificado__ de qualquer forma -&gt; um dos principais pilares para pesquisas e projetos __open science__.

--

+ __script-based__: baseado em código, então maior reproducibilidade, fácil de escalar e adaptar suas análises, transparência (rastrear erros), ótima maneira de aprender sobre métodos.

--

+ __interdisciplinar e modular__: muitos códigos escritos por especialistas de área. No centro de sua filosofia está uma transição suave de usuário para programador.

--

+ __comunicação__ com outras ferramentas: manuscritos, apresentações,  templates, apps e dashboards.


???
_O que é Linguagem R ? É uma linguagem e ambiente para computação estatística e gráficos. É um projeto GNU que é semelhante ao idioma e ao ambiente S desenvolvido na Bell Laboratories (anteriormente AT&amp;T, agora Lucent Technologies) por John Chambers e colegas. R pode ser considerado uma implementação diferente de S._

---
## Por que aprender __R__?

+ comunicação com __outras linguagens de programação__ (ex. __reticulate__ para executar códigos em Python). 

--

+ __capacidade excepcional__ de produção de gráficos!

--


+ __suporte oficial__: ajuda na documentação de cada função, listas de e-mail.

--

+ __uma comunidade bastante ativa e receptiva__:  listas de e-mail, Stack Overflow, [RStudio community](community.rstudio.com/), grupos useR, .purple[R-Ladies+] chapters, comunidades no Slack, &lt;svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"&gt;&lt;/path&gt;&lt;/svg&gt;, &lt;svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"&gt;&lt;/path&gt;&lt;/svg&gt;, &lt;svg viewBox="0 0 496 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"&gt;&lt;/path&gt;&lt;/svg&gt;, &lt;svg viewBox="0 0 640 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"&gt;&lt;/path&gt;&lt;/svg&gt;, &lt;svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"&gt;&lt;/path&gt;&lt;/svg&gt;, &lt;svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"&gt;&lt;/path&gt;&lt;/svg&gt;, &lt;svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"&gt;&lt;/path&gt;&lt;/svg&gt; `#rstats`


&lt;center&gt;
&lt;img src="https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_r-project.png" width="125" /&gt;

---
## __R__ tem uma estrutura modular: __pacotes ou bibliotecas__


+ __R__ __base__ instalação inclui pacotes básicos desenvolvidos e mantidos pelo __`R` Core Development Team__

--

+ outros pacotes são criados pela comunidade e hospedados no __CRAN__ (The Comprehensive `R` Archive Network) ou Bioconductor, GitHub, rOpenSci.org

--

+ para instalar pacotes diretamente do CRAN: `install.packages("tidyverse")`

---
background-image:url("https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_r-project-base.png")
background-size: 60%
background-position: center

.pull-left[Projeto R]


---
background-image:url("https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_r-base.png")
background-size: 45%
background-position: center

.pull-left[Executando R com R Base]



---
background-image:url("https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_rstudio.png")
background-size: 60%
background-position: center

.pull-left[Executando R com RStudio

&lt;svg viewBox="0 0 640 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"&gt;&lt;/path&gt;&lt;/svg&gt;

]






---
background-image:url("https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_rstudio-server.png")
background-size: 60%
background-position: center

.pull-left[Executando R com RStudio Server]


---
background-image:url("https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/00_rgooglecolab.png")
background-size: 65%
background-position: right

.pull-left[Executando R com Google Colab


&lt;svg viewBox="0 0 640 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"&gt;&lt;/path&gt;&lt;/svg&gt;

 - [Google Drive](https://drive.google.com/drive/folders/1WeVErQ4swxiFK_zu3Xtm4ATroLQSKFis)

 - [Google Colab](https://colab.research.google.com/drive/1CTdoQ2xeVDd0TtbvLZr3zNOtWm0gZumG)

]

???
_Colab, ou Colaboratory, é um notebook interativo fornecido pelo Google (principalmente) para escrever e executar Python por meio de um navegador. Podemos realizar análises de dados, criar modelos, avaliar esses modelos no Colab. O processamento é feito em servidores de propriedade do Google na nuvem. Precisamos apenas de um navegador e uma conexão de Internet razoavelmente estável._

---
class: inverse, middle, center
# Configuração e organização do projeto 

---
## Diretório de trabalho

+ você precisa dizer ao R onde você irá trabalhar, então ele irá compreender de onde deverá ler os dados, salvar os resultados, gravar as imagens etc: __working directory__ ou __pasta de trabalho__

--

+ `getwd()` no console

--

+ o padrão é __"home"__: verifique as opções gerais e a aba "File"
--

+ você pode dizer para o R e RStudio onde você quer trabalhar com o comando `setwd()`

--

+ ainda melhor: em vez de abrir o RStudio, abra um __R script__ ou um __RStudio project__ (assim como você faria no MS Word   &lt;svg viewBox="0 0 384 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm220.1-208c-5.7 0-10.6 4-11.7 9.5-20.6 97.7-20.4 95.4-21 103.5-.2-1.2-.4-2.6-.7-4.3-.8-5.1.3.2-23.6-99.5-1.3-5.4-6.1-9.2-11.7-9.2h-13.3c-5.5 0-10.3 3.8-11.7 9.1-24.4 99-24 96.2-24.8 103.7-.1-1.1-.2-2.5-.5-4.2-.7-5.2-14.1-73.3-19.1-99-1.1-5.6-6-9.7-11.8-9.7h-16.8c-7.8 0-13.5 7.3-11.7 14.8 8 32.6 26.7 109.5 33.2 136 1.3 5.4 6.1 9.1 11.7 9.1h25.2c5.5 0 10.3-3.7 11.6-9.1l17.9-71.4c1.5-6.2 2.5-12 3-17.3l2.9 17.3c.1.4 12.6 50.5 17.9 71.4 1.3 5.3 6.1 9.1 11.6 9.1h24.7c5.5 0 10.3-3.7 11.6-9.1 20.8-81.9 30.2-119 34.5-136 1.9-7.6-3.8-14.9-11.6-14.9h-15.8z"&gt;&lt;/path&gt;&lt;/svg&gt;)

---
## Organização do projeto e melhores práticas 

+ projetos são melhores organizados se nós usarmos __uma pasta por projeto__ e  __subpastas__ dentro do diretório de trabalho 

--

+ nós não deveríamos modificar tabelas e __arquivos de dados brutos__ mas __salvar versões de dados processados__ (e os scripts correspondentes)

--

+ ao invés de usar __caminhos absolutos__ nós também deveríamos usar __caminhos relativos__:
  + `.` "here"
  + `./dados` uma subpasta chamada `dados`
  + o próximo nível acima `..`
  + dois níveis acima `../..` 
--

+ evite: `C:users/seu_usuário/sua_estrutura_de_arquivo/seu_diretório_de_trabalho`

---
## Tente adotar a seguinte lógica de organização, o R vai te amar pra sempre


```
projeto/
*    ├── dados/
*    │   ├── brutos
*    │   └── processados
     ├── docs/
*    ├── figs/
     ├── R/
*    ├── output/
*    └── README.md
```

+ descompacte o arquivo __.zip__ em uma pasta de sua preferência

&lt;right&gt;
&lt;svg viewBox="0 0 640 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/right&gt;

---
## Projetos do RStudio 

Projetos do RStudio cria um arquivo __.Rproj__ na sua pasta de trabalho que passará a agir como um __atalho__ para o seu projeto.


---
class: center,middle, inverse

# Ambientes reproduzíveis

---

## Pacote renv 

&lt;svg viewBox="0 0 640 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"&gt;&lt;/path&gt;&lt;/svg&gt;

+ O pacote __renv__ ajuda a criar ambientes reproduzíveis para seus projetos R 

--

+ Use o __renv__ para tornar seus projetos mais isolados

--

&lt;small&gt;

```r
source("R/requirements.R")
```

--

+ Use o comando `renv::init()` para inicializar o __renv__ com um projeto novo ou no existente

--

+ __renv__ criará uma pasta `renv` e um arquivo `renv.lock` que guardará as alterações


&lt;center&gt;
&lt;img src="https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/logo.svg" width="100" /&gt;



---
class:middle, inverse, center

# Pausa, respirem, levantem as dúvidas


<div class="countdown" id="timer_614b626f" style="top:0;right:30%;margin:5%;padding:10px;font-size:5em;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>




---
class:middle, inverse, center
# Introdução ao R 

---

## Introdução ao R 

+ __R__ é uma linguagem orientada a objetos

--

+ `&lt;-` é o operador de atribuição no R, ele não retorna a saída apenas __cria objetos__ que são salvos no seu _workspace_  (área de trabalho)
Windows (`Alt + -`) Mac (`option + -`)

--

+ reescrever um objeto __não afeta outros objetos__ 

--

+  __dicas sobre nomes de objetos__: 
 + não comece com um número ou símbolo.
 + existem palavras proibidas 
 + seja consistente com o seu __estilo de código__! 
 + evite pontos (.)
 + chame funções como __verbos__ e objetos como __substantivos__

???
_help(reserved): if; else; repeat;	while;	function; for;	in;	next;	break;	TRUE; FALSE;	NULL;	Inf;	NaN;	NA_	
--

+ você pode ver quais objetos estão salvos na área de trabalho usando `ls()`

---

## Sobre a área de trabalho

+ R cria __objetos__ que ocupam a memória RAM do seu computador: a área de trabalho ou __workspace__

--

+ a __área de trabalho__ pode ser salva e carregada entre as sessões, MAS

--

+ __você pode perder o controle de como criou os objetos na área de trabalho__

--

+ `#boaspraticas` não salve a sua área de trabalho

---
background-image:url("https://raw.githubusercontent.com/dmarcelinobr/curso_r-cni/main/slides/figs/0a_setup.png")
background-size: 60%
background-position: 100% 100%

.pull-left[Em opções gerais ou preferências]

---
class: inverse, middle, center
# Funções, argumentos e compreensão da ajuda

---
## Funções e argumentos (parâmetros)

```
peso_kg &lt;- sqrt(10)

round(3.14159)

args(round)
```

---
## Se você sabe o nome de uma função
```
help(função)
?função
args(função)
```

+ selecione o nome da função e clique __F1__

Verifique a estrutura do arquivo de ajuda:

+ Description
+ Usage
+ Arguments
+ Details

---
## Se você não sabe o nome exato da função

```
??kruskal
```

(ou pesquise por isto no - google - bing - duckduckgo etc)

---
## A estrutura de uma função (help)

`args(função)`

+ Os argumentos de uma função são codificados:
  + em ordem
  + com ou sem configurações padrão
  
--

Você também pode
+ use os argumentos em ordem, sem nomeá-los
+ use os primeiros argumentos sem nomeá-los e, em seguida, alguns argumentos opcionais, com nome


---
## Tipos de dados no __R__

&lt;small&gt;

```r
animais  &lt;- c("rato", "gato", "cachorro")
peso_g &lt;- c(50, 60, 65, 82)
```

--


```r
class(animais)
```

```
## [1] "character"
```

--


```r
class(peso_g)
```

```
## [1] "numeric"
```
&lt;/small&gt;

--

`character` e `numeric` mas também `logical` e `integer` (números "inteiros" sem componentes decimais, em N), `complexos`, e outros. 

---
class: center, middle

&lt;svg viewBox="0 0 640 512" style="position:relative;display:inline-block;top:.1em;height:3em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"&gt;&lt;/path&gt;&lt;/svg&gt;

---
## Subconjunto de vetores

+ __R__ é __1-idexado__ e os intervalos são fechados (não meio-abertos)


```r
animais  &lt;- c("rato", "gato", "cachorro", "coelho")
animais[2]
```

```
## [1] "gato"
```

+ A seleção de subconjuntos é feita com colchetes `[]`


```r
animais[c(3, 2)]
```

```
## [1] "cachorro" "gato"
```

---
## Seleção condicional de subconjuntos


```r
peso_g &lt;- c(21, 34, 39, 54, 55)
peso_g[c(FALSE, FALSE, TRUE, TRUE, TRUE)]
```

```
## [1] 39 54 55
```

Ninguém trabalha assim, em vez disso usamos __testes lógicos__ para __gerar__ esses vetores lógicos

---


## Testes lógicos (lógica booleana)

+ igualdade ou não: `==`, `!=`
+ desigualdades: `&lt;`. `&gt;`, `&lt;=`, `&gt;=`
+ união (OR) `|`
+ intersecção (AND) `&amp;`
+ pertencer `%in%`
+ diferenças entre conjuntos: `setdiff()`
+ negação funcional `!`: "não em" `!a %in% b`


---
## Seleção condicional de subconjuntos


```r
peso_g &lt;- c(21, 34, 39, 54, 55)

peso_g[peso_g &gt; 36]
```

```
## [1] 39 54 55
```
''

---
## Comparando vetores

&lt;small&gt;

```r
animais  &lt;- c("rato", "gato", "cachorro", "coelho")
mais_animais &lt;- c("rato", "gato", "pato", "cachorro", "coelho",
                  "ovelha")

animais %in% mais_animais
```

```
## [1] TRUE TRUE TRUE TRUE
```

---
## Comparando vetores

&lt;small&gt;

```r
animais  &lt;- c("rato", "gato", "cachorro", "coelho")
mais_animais &lt;- c("rato", "gato", "pato", "cachorro", "coelho",
                  "ovelha")

animais == mais_animais
```

```
## Warning in animais == mais_animais: longer object length is not a multiple of
## shorter object length
```

```
## [1]  TRUE  TRUE FALSE FALSE FALSE FALSE
```

+ Vetores são comparados __um a um E reciclados__ quando um deles é mais curto, então use `%in%` quando você quiser verificar se um valor  __pertence ao conjunto__

---
## Dados ausentes 

&lt;small&gt;

```r
idades &lt;- c(2, 4, 4, NA, 6)
mean(idades)
```

```
## [1] NA
```

```r
max(idades)
```

```
## [1] NA
```

```r
mean(idades, na.rm = TRUE)
```

```
## [1] 4
```

```r
min(idades, na.rm = TRUE)
```

```
## [1] 2
```

```r
max(idades, na.rm = TRUE)
```

```
## [1] 6
```

---

## Estrutura de dados no R 

+ __vector__: matrizes lineares (uma dimensão: apenas comprimento) 

--

+ __factors__: vectores (uma dimensão) representando __variáveis categóricas__ e portanto tendo __níveis (levels)__

--

+ __matrices__: matrizes de vetores -&gt; de um mesmo tipo (todos numéricos ou todos character, strings (texto), por exemplo) (duas dimensões: largura e comprimento)

--

+ __data frames__: arrays ou matrizes bidimensionais, mas podem ser de tipos combinados (como: coluna 1 com nomes ou rótulos, coluna 2 com números)

--

+ __arrays__ são similares a matrizes e data frames, mas podem ser objetos tridimensionais, data frame em camadas ("layered" data frames)

--

+ __list__: literalmente uma lista de qualquer coisa (uma lista de data frames, ou diferentes objetos)


???

_As variáveis categóricas contêm um número finito de categorias ou grupos distintos. Os dados categóricos podem não ter uma ordem lógica. Por exemplo, os preditores categóricos incluem gênero, tipo de material e método de pagamento._

_As cariáveis discretas são variáveis numéricas que têm um número contável de valores entre quaisquer dois valores. Uma variável discreta é sempre numérica. Por exemplo, o número de reclamações de clientes ou o número de falhas ou defeitos._

_As variáveis contínuas são variáveis numéricas que têm um número infinito de valores entre dois valores quaisquer. Uma variável contínua pode ser numérica ou de data/hora. Por exemplo, o comprimento de uma peça ou a data e hora em que um pagamento é recebido._



---
class: inverse, middle, center

# Escrita no R: sintaxes e boas práticas

---

## Aceita diferentes sintaxes

+ na maior parte do tempo, o modo __pipe__ e o modo __nested__ servirão você muito bem:
--


```r
# Modo nested
f5(f4(f3(f2(f1(x)))))

# Modo pipe
library(magrittr)
x %&gt;% f1 %&gt;% f2 %&gt;% f3 %&gt;% f4 %&gt;% f5
```

--
+ você também verá pelo menos outras duas sintaxes: é o modo __formula__ (usando o til `~`) e o modo __prefixo__ (usando a crase "`" )



???
_O modo *pipe*,  te permite escrever de forma diferente o *R*, indo da esquerda para a direita, como estamos acostumados a ler no mundo ocidental. Numa das seções deste tópico, entraremos a fundo no pacote *magrittr* e o que você pode alterar no seu código com ele._


---
class: inverse, middle, center

# Conseguindo ajuda com erros sobre o R

---
## Outras fontes de ajuda

+ Taskviews 

[https://cran.r-project.org/web/views/](https://cran.r-project.org/web/views/)


---
class: center, middle
# Obrigado!

&lt;center&gt;
&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;fill:#A70000;height:1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"&gt;&lt;/path&gt;&lt;/svg&gt; [dmarcelino@live.com](mailto:dmarcelino@live.com) 

&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;fill:#A70000;height:1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"&gt;&lt;/path&gt;&lt;/svg&gt; [@dmarcelinobr](https://twitter.com/dmarcelinobr) 

&lt;svg viewBox="0 0 448 512" style="position:relative;display:inline-block;top:.1em;fill:#A70000;height:1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"&gt;&lt;/path&gt;&lt;/svg&gt;
[dmarcelinobr](https://www.linkedin.com/in/dmarcelinobr/) 

&lt;svg viewBox="0 0 496 512" style="position:relative;display:inline-block;top:.1em;fill:#A70000;height:1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt;
[dmarcelinobr](http://github.com/dmarcelinobr) 



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
